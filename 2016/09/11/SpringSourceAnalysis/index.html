<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Welcome to join Suvin's technology gossip." />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="Spring-Coreæ ¸å¿ƒé€»è¾‘æºç åˆ†æåˆå§‹åŒ–å®¹å™¨
æœåŠ¡å™¨å®¹å™¨æ ¹æ®é…ç½®æ–‡ä»¶ï¼ˆTomcat:web.xmlï¼‰åŠ è½½ContextInitialListeneräº‹ä»¶:ContextLoaderListener.contextInitialized();  
å°è¯•è·å¾—parentContext;
æ ¹æ®parentContext åˆå§‹åŒ–ApplicationContext;
å°†ApplicationRootä¸º">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring-Coreæ ¸å¿ƒé€»è¾‘æºç åˆ†æ">
<meta property="og:url" content="https://suvinseptue.github.io/2016/09/11/SpringSourceAnalysis/index.html">
<meta property="og:site_name" content="Welcome to join Suvin's technology gossip.">
<meta property="og:description" content="Spring-Coreæ ¸å¿ƒé€»è¾‘æºç åˆ†æåˆå§‹åŒ–å®¹å™¨
æœåŠ¡å™¨å®¹å™¨æ ¹æ®é…ç½®æ–‡ä»¶ï¼ˆTomcat:web.xmlï¼‰åŠ è½½ContextInitialListeneräº‹ä»¶:ContextLoaderListener.contextInitialized();  
å°è¯•è·å¾—parentContext;
æ ¹æ®parentContext åˆå§‹åŒ–ApplicationContext;
å°†ApplicationRootä¸º">
<meta property="og:updated_time" content="2017-02-06T13:44:34.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Spring-Coreæ ¸å¿ƒé€»è¾‘æºç åˆ†æ">
<meta name="twitter:description" content="Spring-Coreæ ¸å¿ƒé€»è¾‘æºç åˆ†æåˆå§‹åŒ–å®¹å™¨
æœåŠ¡å™¨å®¹å™¨æ ¹æ®é…ç½®æ–‡ä»¶ï¼ˆTomcat:web.xmlï¼‰åŠ è½½ContextInitialListeneräº‹ä»¶:ContextLoaderListener.contextInitialized();  
å°è¯•è·å¾—parentContext;
æ ¹æ®parentContext åˆå§‹åŒ–ApplicationContext;
å°†ApplicationRootä¸º">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://suvinseptue.github.io/2016/09/11/SpringSourceAnalysis/"/>





  <title> Spring-Coreæ ¸å¿ƒé€»è¾‘æºç åˆ†æ | Welcome to join Suvin's technology gossip. </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Welcome to join Suvin's technology gossip.</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle"></p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://suvinseptue.github.io/2016/09/11/SpringSourceAnalysis/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Suvin">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/uploads/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Welcome to join Suvin's technology gossip.">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Welcome to join Suvin's technology gossip." src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Spring-Coreæ ¸å¿ƒé€»è¾‘æºç åˆ†æ
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-11T17:01:26+08:00">
                2016-09-11
              </time>
            

            

            
          </span>

          

          
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Spring-Coreæ ¸å¿ƒé€»è¾‘æºç åˆ†æ"><a href="#Spring-Coreæ ¸å¿ƒé€»è¾‘æºç åˆ†æ" class="headerlink" title="Spring-Coreæ ¸å¿ƒé€»è¾‘æºç åˆ†æ"></a>Spring-Coreæ ¸å¿ƒé€»è¾‘æºç åˆ†æ</h2><h4 id="åˆå§‹åŒ–å®¹å™¨"><a href="#åˆå§‹åŒ–å®¹å™¨" class="headerlink" title="åˆå§‹åŒ–å®¹å™¨"></a><a></a>åˆå§‹åŒ–å®¹å™¨</h4><ol>
<li>æœåŠ¡å™¨å®¹å™¨æ ¹æ®é…ç½®æ–‡ä»¶ï¼ˆTomcat:web.xmlï¼‰åŠ è½½ContextInitialListeneräº‹ä»¶:<code>ContextLoaderListener.contextInitialized()</code>;  </li>
<li>å°è¯•è·å¾—parentContext;</li>
<li>æ ¹æ®parentContext <a href="#Initial ApplicationContext">åˆå§‹åŒ–ApplicationContext</a>;</li>
<li>å°†<code>ApplicationRoot</code>ä¸ºkeyï¼Œå°†contextæ³¨å†Œåˆ°servletContextä¸­;</li>
<li>å¦‚æœå½“å‰çº¿ç¨‹çš„ClassLoaderä¸ºContextClassLoaderï¼Œåˆ™å°†contextè®¾ç½®ä¸ºcurrentContext;å¦åˆ™å°†contextè®¾ç½®ä¸ºperThreadContext;  </li>
</ol>
<p>####<a name="Initial ApplicationContext">åˆå§‹åŒ–ApplicationContext</a> </p>
<ol>
<li>é€šè¿‡<code>BeanUtil.instantiateClass()</code>æ¥åˆ›å»ºConfigurableWebApplicationContextï¼›</li>
<li>è®¾ç½®contextçš„idã€parentã€servletContextç­‰å±æ€§ï¼ˆä¸æ™“å¾—Idæœ‰ä»€ä¹ˆç”¨ï¼Œä»£ç è¿˜è´¹äº†å¥½å‡ è¡Œè·å¾—best possible idğŸ˜‚ï¼‰;</li>
<li>è°ƒç”¨<code>ctx.refresh()</code>æ–¹æ³•<a href="#start up Spring">æ„å»ºSpringå®¹å™¨</a>æ„å»ºSpringå®¹å™¨.</li>
</ol>
<blockquote>
<p>é€šè¿‡refreshæ–¹å¼åˆå§‹åŒ–å®¹å™¨è€Œä¸æ˜¯initçš„æ–¹å¼ï¼Œè€Œä¸”refreshä¸­æœ‰é€šè¿‡beanFactory.getBeanæ–¹å¼è·å–çš„å¯¹è±¡ï¼Œåˆå§‹åŒ–é˜¶æ®µBeanFactoryä¸­æ˜¯æ²¡æœ‰BeanDefinitionçš„ï¼Œå› æ­¤è¿™é‡Œæˆ‘æ€€ç–‘å’Œtomcatçš„çƒ­éƒ¨ç½²æœ‰å…³ç³»ã€‚</p>
</blockquote>
<p>####<a name="start up Spring">æ„å»ºSpringå®¹å™¨</a></p>
<ol>
<li>æ ¹æ®ä¿¡å·<code>startupShutdownMonitor</code>æ¥ä½œåŒæ­¥ï¼Œåœ¨åŒæ­¥ä»£ç å—ä¸­è¿›è¡Œrefreshæ“ä½œ;  </li>
</ol>
<blockquote>
<p>Springæ³¨é‡Šå¯¹startupShutdownMonitoræœ‰å¦‚ä¸‹è§£é‡Šï¼š<br>Synchronization monitor for the â€œrefreshâ€ and â€œdestroyâ€.<br>å³destroyæ–¹æ³•å¿…é¡»ç­‰refreshæ–¹æ³•æ‰§è¡Œå®Œä¹‹åæ‰èƒ½è¢«è°ƒç”¨;  </p>
</blockquote>
<ol>
<li><code>prepareRefresh()</code>:å‡†å¤‡åˆ·æ–°ï¼Œè¿™é‡Œæœ‰ä¸ªåŒæ­¥è®¾ç½®å˜é‡activeï¼Œæ²¡çœ‹æ‡‚å•¥æ„æ€ï¼›</li>
<li><code>obtainRefreshBeanFactory()</code>ï¼š<a href="#init beanFactory">åˆå§‹åŒ–</a>å¹¶è·å–BeanFactory;</li>
<li><code>prepareBeanFactory()</code>:åˆå§‹åŒ–BeanFactoryçš„ä¾èµ–ï¼ŒåŒ…æ‹¬ignoreDependencyå’Œç¡¬ä»£ç registerDependency;Ignoreæ‰çš„ä¾èµ–é€šå¸¸æ˜¯ç”±åˆ«çš„æ–¹å¼è¿›è¡Œæ³¨å…¥ï¼Œæ¯”å¦‚BeanFactoryå¯¹è±¡å¯ä»¥ç”±BeanFactoryAwareæ–¹å¼æ³¨å…¥ï¼›è·å–å¹¶ç»´æŠ¤ç³»ç»Ÿå˜é‡å’Œç¯å¢ƒå˜é‡</li>
<li><code>invokeBeanFactoryPostProcessor()</code>:æ ¹æ®BeanFactoryæ˜¯å¦ä¸ºBeanDefinitionRegistryæ¥è°ƒç”¨BeanFactoryPostProcessor,å†æ ¹æ®priorityã€orderã€nonOrderçš„é¡ºåºè°ƒç”¨BeanPostProcessorã€‚åœ¨æœåŠ¡å™¨åˆå§‹åŒ–é˜¶æ®µå¹¶æ²¡æœ‰æ³¨å†ŒBeanFactoryPostProcessorï¼Œä¹Ÿè®¸åœ¨çƒ­éƒ¨ç½²é˜¶æ®µä¼šæ‰§è¡Œå§ï¼›<em>ä¹Ÿå°±æ˜¯è¯´ï¼ŒBeanFactoryPostProcessoræ˜¯åœ¨BeanFactoryåˆå§‹åŒ–ä¹‹åBeanå¯¹è±¡åˆå§‹åŒ–å‰æ‰§è¡Œçš„</em>(ç†Ÿæ‚‰çš„BeanFactoryPostProcessor:<code>PropertyPlaceholderConfigure</code>)</li>
<li><code>registerBeanPostProcessor()</code>:æ ¹æ®<code>BeanFactory.getBeanNamesForType()</code>è·å–BeanPostProcessorï¼Œç„¶åä»¥Priorityã€Orderã€NonOrderçš„é¡ºåºæ³¨å†Œåˆ°BeanPostProcessorListä¸­ã€‚BeanPostProcessorListä¸ºArrayListï¼Œå› æ­¤æ‰§è¡Œé¡ºåºä¸ºï¼šPriority&gt;Order&gt;NonOrderï¼›</li>
<li><code>initMessageSource()</code>:è·å–MessageSourceå¯¹è±¡ï¼Œé»˜è®¤ä¸ºDelegatingMessageSource;</li>
<li>æ¥ä¸‹æ¥æ˜¯æ³¨å†Œå¹¿æ’­äº‹ä»¶ç›‘å¬å™¨ã€è°ƒç”¨å­ç±»çš„onRefreshæ–¹æ³•ã€æ³¨å†Œåº”ç”¨ç›‘å¬å™¨ï¼›</li>
<li><code>finishBeanFactoryInitialization()</code>ï¼šåˆå§‹åŒ–æ‰€æœ‰not-lazy-init Beanã€‚ä¹Ÿæ˜¯SpringCoreçš„<a href="#spring-core">æ ¸å¿ƒä»£ç </a>ï¼›</li>
<li><code>finishRefresh</code>:è§¦å‘åŠ è½½å®Œæˆäº‹ä»¶ï¼›</li>
</ol>
<h4 id="åˆå§‹åŒ–BeanFactory"><a href="#åˆå§‹åŒ–BeanFactory" class="headerlink" title="åˆå§‹åŒ–BeanFactory"></a><a name="init beanFactory">åˆå§‹åŒ–BeanFactory</a></h4><ol>
<li>æ¸…ç©ºå·²åŠ è½½çš„Beanï¼›</li>
<li>åˆ›å»ºä¸€ä¸ªå†…éƒ¨BeanFactoryï¼›</li>
<li>è‡ªå®šä¹‰BeanFactoryé…ç½®ï¼šsetAllowBeanDefinitionOverridingã€setAllowEagerClassLoadingã€setAllowCircularReferencesã€setAllowRawInjectionDespiteWrapping</li>
<li><code>loadBeanDefinitions()</code>:éå†Resourcesä¸­çš„Xmlå®šä¹‰çš„<a href="#loadBeanDefinition">beanåŠ è½½</a>è‡³BeanDefinitionï¼›</li>
</ol>
<h4 id="BeanåŠ è½½"><a href="#BeanåŠ è½½" class="headerlink" title="BeanåŠ è½½"></a><a name="loadBeanDefinition">BeanåŠ è½½</a></h4><ol>
<li>æ ¹æ®Resourceç”ŸæˆDocumentå¯¹è±¡ï¼›æ ¹æ®Documentçš„Elementçš„nodeNameå±æ€§æ¥å¤„ç†Beanï¼š<ul>
<li>å¦‚æœnodeNameä¸ºImportï¼Œåˆ™æ‰§è¡Œ<code>importBeanDefinitionResource</code>æ“ä½œåŠ è½½import-resourceå®šä¹‰çš„beanï¼š</li>
<li>å¦‚æœnodeNameä¸ºAliasï¼Œåˆ™å°†BeanNameä¸Aliaså…³è”æ³¨å†Œï¼›</li>
<li>å¦‚æœnodeNameä¸ºBeanï¼Œåˆ™æ ¹æ®å±æ€§è§£æElementç”ŸæˆBeanHolderï¼Œå°†BeanNameä¸BeanDefinitionæ³¨å†Œåˆ°BeanDefinitionsç¼“å­˜ä¸­;</li>
<li>å¦‚æœnodeNameä¸ºBeans,åˆ™è·³è‡³1.å¤„ç†Beansä¸­çš„Beanï¼›</li>
</ul>
</li>
</ol>
<h4 id="æ ¸å¿ƒä»£ç "><a href="#æ ¸å¿ƒä»£ç " class="headerlink" title="æ ¸å¿ƒä»£ç "></a><a name="spring-core">æ ¸å¿ƒä»£ç </a></h4><ol>
<li>1.<code>finishBeanFactoryInitialization</code>-&gt;<code>preInstantiateSingletons()</code>:åŒæ­¥è·å–ç¼“å­˜ä¸­çš„<code>beanDefinitionNames</code>ï¼Œæ”¾åˆ°å±€éƒ¨å˜é‡ä¸­;</li>
<li>éå†beanDefinitionName,è°ƒç”¨<a href="#get bean">getBean()</a>åˆå§‹åŒ–Bean;</li>
</ol>
<h5 id="getBean"><a href="#getBean" class="headerlink" title="getBean()"></a><a name="get bean">getBean()</a></h5><ol>
<li>é¦–å…ˆå°è¯•ä»singletonObjectsã€earlySingletonObjectsçš„ç¼“å­˜ä¸­è·å–å¯¹è±¡;</li>
<li>å¦‚æœå¯¹è±¡ä¸ä¸ºç©ºï¼Œåˆ™è°ƒç”¨<code>getObjectForBeanInstance()</code>æ–¹æ³•é€šè¿‡FactoryBeanæˆ–è€…å¯¹è±¡æœ¬èº«çš„æ–¹å¼è·å¾—Beanå¯¹è±¡;</li>
<li>å¦‚æœå¯¹è±¡ä¸ä¸ºç©ºï¼Œåˆ™å°è¯•åœ¨ParentBeanFactoryä¸­è·å¾—å¯¹è±¡ï¼Œå¹¶è¿”å›ï¼›</li>
<li>å¦‚æœParentBeanFactoryå¯¹è±¡ä¸­æ²¡æœ‰è·å¾—Beanå¯¹è±¡ï¼Œåˆ™è¯»å–BeanDefinistionsç¼“å­˜ä¸­è·å¾—è¯¥Beançš„Definitionå¯¹è±¡ï¼›</li>
<li>æ‹¿åˆ°BeanDefinitionå¯¹è±¡åï¼Œéå†è¯¥å¯¹è±¡çš„dependsOnå±æ€§ï¼Œå¹¶å°†è¯¥BeanNameä¸DependsOnçš„å¯¹è±¡Nameæ³¨å†ŒdependentBeanMapä¸­ï¼Œç„¶åè°ƒç”¨<a href="#get bean">getBean()</a>æ¥å®ä¾‹åŒ–DependsOnçš„å¯¹è±¡ã€‚è¿™é‡Œä¼šæ ¹æ®dependentBeanMapæ¥æ£€æŸ¥æ˜¯å¦å­˜åœ¨å¾ªç¯ä¾èµ–ï¼Œ(<em>Springå¯¹Beanå±æ€§ä¹‹é—´çš„å¾ªåä¾èµ–æ˜¯æœ‰è§£å†³æ–¹æ¡ˆçš„ï¼Œä¸æ¸…æ¥šè¿™é‡Œçš„å¾ªåä¾èµ–ä¸ºä»€ä¹ˆä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸</em>)ï¼›</li>
<li>å®ä¾‹åŒ–DependsOnå¯¹è±¡åï¼Œå†æ ¹æ®Beançš„Scopeå±æ€§åˆ›å»ºå¯¹è±¡ï¼ŒSingletonæ–¹å¼å’Œprototypeæ–¹å¼çš„åŒºåˆ«åœ¨äºSingletonå¯¹è±¡åœ¨åˆ›å»ºçš„æ—¶å€™é¦–å…ˆä¼šåœ¨ç¼“å­˜ä¸­å–å¯¹è±¡ï¼Œå¦‚æœä¸å­˜åœ¨å†<a href="#createBean">createBean()</a>åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡æ”¾åˆ°singletonObjectså’ŒearlySingletonObjectsä¸­ï¼Œè€Œprototypeç±»å‹çš„åˆ™ä¸ä¸ä¼šåœ¨ç¼“å­˜ä¸­å–å¯¹è±¡ï¼Œç›´æ¥åˆ›å»ºæ–°å¯¹è±¡.</li>
<li><code>getObjectForBeanInstance()</code><br>:æ‹¿åˆ°Beanå¯¹è±¡ä¹‹åï¼Œç¡®å®šBeanæ˜¯å¦ä¸ºFactoryBeanï¼Œå¦‚æœæ˜¯åˆ™éœ€è¦é€šè¿‡FactoryBeançš„æ–¹å¼è·å–beanï¼Œå¦åˆ™ç›´æ¥è¿”å›bean.</li>
</ol>
<h5 id="createBean"><a href="#createBean" class="headerlink" title="createBean()"></a><a name="createBean">createBean()</a></h5><ol>
<li>åœ¨åˆå§‹åŒ–å‰ï¼Œé¦–å…ˆè°ƒç”¨<code>resolveBeanClass()</code>ç¡®ä¿beanClasså·²ç»åŠ è½½åˆ°ClassLoaderé‡Œé¢ï¼›è¿™é‡Œä¼šå»çœ‹BeanDefinitionä¸­æ˜¯å¦æœ‰æŒ‡å®šçš„classï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼šè°ƒç”¨<code>ClassUtils.forName()</code>åœ¨ClassLoaderå®¹å™¨ä¸­åŠ è½½classï¼›</li>
<li>ç¡®ä¿classå·²ç»åŠ è½½å®Œæˆä¹‹åï¼Œæ‰§è¡Œ<code>resolveBeforeInstantiation()</code>ï¼Œå°è¯•é€šè¿‡<code>InstantiationAwareBeanPostProcessor</code>æ¥åˆ›å»ºBeanï¼Œå¦‚æœBeanåˆ›å»ºæˆåŠŸï¼Œåˆ™è°ƒç”¨<code>applyBeanPostProcessorsAfterInitialization()</code>åº”ç”¨Beanåå¤„ç†å™¨ï¼Œå¹¶è¿”å›Beanå¯¹è±¡ï¼›(<em><code>InstantiationAwareBeanPostProcessor</code>è¿™ä¸ªé‡Œé¢è™½ç„¶å¯ä»¥è¿”å›nullï¼Œä½†æ˜¯è¿”å›nullä¹‹åï¼ŒSpringå®¹å™¨ä¼šè®¤ä¸ºæ²¡æœ‰åˆ›å»ºbeanï¼Œé‡æ–°åˆ›å»ºbean</em>)</li>
<li>å¦‚æœ<code>InstantiationAwareBeanPostProcessor</code>è¿”å›null,è°ƒç”¨<a href="#doCreateBean">doCreateBean()</a>çœŸæ­£çš„åˆ›å»ºBeanå¯¹è±¡.(os:åˆ›å»ºä¸ªå¯¹è±¡å‰æˆçœŸé•¿ğŸ˜´)</li>
</ol>
<h5 id="doCreateBean"><a href="#doCreateBean" class="headerlink" title="doCreateBean()"></a><a name="doCreateBean">doCreateBean()</a></h5><ol>
<li>é€šè¿‡<code>createBeanInstance()</code>åˆ›å»ºBeanå®ä¾‹ã€‚è¯¥æ–¹æ³•é¦–å…ˆåœ¨resolvedConstructorçš„ä¸€ç³»åˆ—å˜é‡ä¸­æ‰¾åˆ°ç¼“å­˜çš„Constructorï¼Œå¦åˆ™æ‰¾åˆ°ä¸€ä¸ªFastConstructor(æ‰¾æœ€åˆé€‚çš„è¿‡ç¨‹æ¯”è¾ƒå†—é•¿ï¼Œè¿™é‡Œçœç•¥è¿™ä¹ˆå¤šå­—)ï¼Œå†æ ¹æ®æ˜¯å¦æœ‰OverrideMethodï¼Œæ¥é€‰æ‹©é€šè¿‡Reflectçš„å½¢å¼è¿˜æ˜¯CGlibçš„å½¢å¼åˆ›å»ºå¯¹è±¡ï¼›</li>
<li>Beanå®ä¾‹åŒ–å‡ºæ¥ä¹‹åï¼Œè°ƒç”¨<code>applyMergedBeanDefinitionPostProcessors()</code>æ¥æ‰§è¡ŒBeanPostProcessorï¼›</li>
<li>è¿™æ—¶å€™å±æ€§è¿˜æ˜¯ç©ºçš„ï¼Œåœ¨æ³¨å…¥å±æ€§æ—¶ä¼šå‘ç”Ÿå¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Œå› æ­¤è¿™é‡Œä¼šåˆ¤æ–­æ˜¯å¦å…è®¸å¾ªç¯ä¾èµ–ï¼Œå¦‚æœå…è®¸çš„è¯å°†beançš„å¼•ç”¨é€šè¿‡<code>ObejctFactory</code>å·¥å‚çš„æ–¹å¼æš´éœ²å‡ºå»ï¼›</li>
<li><code>populateBean()</code>ï¼Œéå†å¹¶ä¸”æ³¨å…¥ä¾èµ–ã€‚</li>
<li><code>initializeBean()</code>ï¼Œè°ƒç”¨Beançš„åˆå§‹åŒ–æ–¹æ³•ï¼Œinitå•¦ï¼ŒafterPropertiesSetå•¦ã€‚</li>
</ol>
<p><hr></p>
<h4 id="é¢å¤–è¡¥å……-å®ä¾‹Beanæ˜¯ä»€ä¹ˆæ—¶å€™å˜æˆProxyçš„å‘¢ï¼Ÿ"><a href="#é¢å¤–è¡¥å……-å®ä¾‹Beanæ˜¯ä»€ä¹ˆæ—¶å€™å˜æˆProxyçš„å‘¢ï¼Ÿ" class="headerlink" title="é¢å¤–è¡¥å……:å®ä¾‹Beanæ˜¯ä»€ä¹ˆæ—¶å€™å˜æˆProxyçš„å‘¢ï¼Ÿ"></a>é¢å¤–è¡¥å……:å®ä¾‹Beanæ˜¯ä»€ä¹ˆæ—¶å€™å˜æˆProxyçš„å‘¢ï¼Ÿ</h4><p>é€šè¿‡<a href="#doCreateBean">doCreateBean()</a>çš„æ­¥éª¤1.å‡ºæ¥çš„å®ä¾‹è¿™ä¸ªæ—¶å€™è¿˜æ˜¯å¯¹è±¡æœ¬èº«ï¼Œè€ŒSpringæš´éœ²å‡ºæ¥çš„Beanåˆéƒ½æ˜¯ä»¥ä»£ç†å½¢å¼å‡ºç°çš„ï¼Œé‚£ä¹ˆSpringæ˜¯ä»€ä¹ˆæ—¶å€™å¯¹å®ä¾‹è¿›è¡Œä»£ç†wrapçš„å‘¢ï¼Œé€šè¿‡Debugçœ‹åˆ°åœ¨<code>applyMergedBeanDefinitionPostProcessors()</code>é˜¶æ®µï¼Œ<br>AbstractAutoProxyCreatorä»¥BeanPostProcessorçš„æ–¹å¼å¯¹å®ä¾‹å‡ºæ¥çš„Beanè¿›è¡ŒAutoProxyï¼Œé€šè¿‡åˆ¤æ–­è¯¥å®ä¾‹çš„Classå¯¹è±¡æ˜¯å¦æœ‰Interfacesï¼Œå¦‚æœæœ‰åˆ™é€šè¿‡JDK Dynamicçš„æ–¹å¼ä»£ç†ï¼Œå¦åˆ™ä½¿ç”¨CGlib.</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/07/08/JVM/" rel="next" title="Note for JVM">
                <i class="fa fa-chevron-left"></i> Note for JVM
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/09/21/NoteOfAbstractQueueSynchronizer/" rel="prev" title="Notes for AbstractQueueSynchronizer">
                Notes for AbstractQueueSynchronizer <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="Suvin" />
          <p class="site-author-name" itemprop="name">Suvin</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Spring-Coreæ ¸å¿ƒé€»è¾‘æºç åˆ†æ"><span class="nav-number">1.</span> <span class="nav-text">Spring-Coreæ ¸å¿ƒé€»è¾‘æºç åˆ†æ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#åˆå§‹åŒ–å®¹å™¨"><span class="nav-number">1.0.1.</span> <span class="nav-text">åˆå§‹åŒ–å®¹å™¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#åˆå§‹åŒ–BeanFactory"><span class="nav-number">1.0.2.</span> <span class="nav-text">åˆå§‹åŒ–BeanFactory</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#BeanåŠ è½½"><span class="nav-number">1.0.3.</span> <span class="nav-text">BeanåŠ è½½</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ ¸å¿ƒä»£ç "><span class="nav-number">1.0.4.</span> <span class="nav-text">æ ¸å¿ƒä»£ç </span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#getBean"><span class="nav-number">1.0.4.1.</span> <span class="nav-text">getBean()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#createBean"><span class="nav-number">1.0.4.2.</span> <span class="nav-text">createBean()</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#doCreateBean"><span class="nav-number">1.0.4.3.</span> <span class="nav-text">doCreateBean()</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#é¢å¤–è¡¥å……-å®ä¾‹Beanæ˜¯ä»€ä¹ˆæ—¶å€™å˜æˆProxyçš„å‘¢ï¼Ÿ"><span class="nav-number">1.0.5.</span> <span class="nav-text">é¢å¤–è¡¥å……:å®ä¾‹Beanæ˜¯ä»€ä¹ˆæ—¶å€™å˜æˆProxyçš„å‘¢ï¼Ÿ</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Suvin</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  

  
      <!-- UY BEGIN -->
      <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid="></script>
      <!-- UY END -->
  




  
  

  

  

  

  


</body>
</html>
